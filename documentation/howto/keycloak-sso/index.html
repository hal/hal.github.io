<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Describes how HAL authentication works with Keycloak SSO">
<meta name=author content>
<meta name=generator content="Hugo 0.92.2">
<link rel=canonical href=https://hal.github.io/documentation/howto/keycloak-sso/>
<title>Keycloak SSO | HAL Management Console</title>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-89365654-5','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
<link rel="shortcut icon" type=image/x-icon href=/favicon.ico>
<link rel=apple-touch-icon href=/img/hal-256.png>
<link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css integrity=sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm crossorigin=anonymous>
<link rel=stylesheet href=https://overpass-30e2.kxcdn.com/overpass.css crossorigin=anonymous>
<link rel=stylesheet href=https://overpass-30e2.kxcdn.com/overpass-mono.css crossorigin=anonymous>
<link href=/css/lightbox.min.css rel=stylesheet type=text/css>
<link href=/css/syntax.css rel=stylesheet type=text/css>
<link href=/css/main.css rel=stylesheet type=text/css>
<script src=https://kit.fontawesome.com/2f7363d383.js></script>
</head>
<body>
<nav class="navbar navbar-expand-md navbar-dark bg-dark">
<button class=navbar-toggler type=button data-toggle=collapse data-target=#hal-navbar aria-controls=hal-navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span>
</button>
<div class="collapse navbar-collapse" id=hal-navbar>
<ul class="navbar-nav mr-auto">
<li class=nav-item>
<a class=nav-link href=/>Home</a>
</li>
<li class="nav-item active">
<a class=nav-link href=/documentation/>Documentation</a>
</li>
<li class=nav-item>
<a class=nav-link href=/development/>Development</a>
</li>
<li class=nav-item>
<a class=nav-link href=/releases/>Releases</a>
</li>
<li class=nav-item>
<a class=nav-link href=/blog/>Blog</a>
</li></ul>
<ul class=navbar-nav><li class=nav-item>
<a class=nav-link href=https://www.youtube.com/channel/UCcXaCVPvmzgLz74FnzlWoSg/ title=Youtube><span class="fab fa-youtube"></span></a>
</li><li class=nav-item>
<a class=nav-link href=https://github.com/hal/console title="Source Code"><span class="fab fa-github"></span></a>
</li><li class=nav-item>
<a class=nav-link href=https://wildfly.zulipchat.com title=Zulip><span class="far fa-comments"></span></a>
</li><li class=nav-item>
<a class=nav-link href=https://gitter.im/hal/console title=Gitter><span class="fab fa-gitter"></span></a>
</li><li class=nav-item>
<a class=nav-link href=https://issues.jboss.org/projects/HAL/issues title=Issues><span class="fas fa-bug"></span></a>
</li></ul>
</div>
</nav>
<div class=container-fluid>
<div class="row flex-xl-nowrap">
<main class="col-12 col-md-12 py-md-3 px-md-5 col-lg-9 hal-content" role=main><aside class="d-none d-lg-block col-lg-3 hal-aside">
<div class=hal-aside-separator><nav class=hal-breadcrumb aria-label=breadcrumb>
<h6>You're here:</h6>
<ol class="breadcrumb bg-white py-0"><li class=breadcrumb-item><a href=/documentation/>Documentation</a></li><li class=breadcrumb-item><a href=/documentation/howto/>Recipes & How To</a></li><li class=breadcrumb-item aria-current=page><span class=dropdown>
<a class="dropdown-toggle clickable" data-toggle=dropdown>
Keycloak SSO <span class=caret></span>
</a>
<div class="dropdown-menu dropdown-menu-right hal-breadcrumb-dropdown" role=menu aria-labelledby>
</div>
</span></li></ol>
</nav>
<hr><div class=hal-toc>
<h6>On this page:</h6><nav id=TableOfContents></nav></div>
</div>
</aside><article class=hal-article>
<header><h1 class=display-4>Keycloak SSO</h1></header>
<p>When user configures Wildfly to authenticate user to Keycloak SSO, HAL supports the authentication the following way:</p>
<ul>
<li>HAL redirects the login attempt to keycloak server, if successful redirect back to HAL.</li>
<li>Provide the logout option in HAL to call the logout page on keycloak. This is displayed under the username in the header section.</li>
<li>Displays basic Keycloak settings in the Access Control page.</li>
<li>Displays a link to user profile on Keycloak server.</li>
<li>Point the Access Control link in the Homepage to the Keycloak server URL.</li>
</ul>
<p>The Wildfly Access Control mechanism to manage users and roles should be disabled, because they are managed in Keycloak server. However RBAC continues to works in Wildfly to fine tune permission settings.</p>
<p><strong>How to setup Wildfly to use Keycloak authentication</strong></p>
<ul>
<li><a href=https://www.keycloak.org/docs/latest/securing_apps/index.html#jboss-eap-wildfly-adapter>How to install Keycloak Wildfly Adapter binaries</a></li>
<li><a href=https://docs.jboss.org/author/display/WFLY/Protecting+Wildfly+Adminstration+Console+With+Keycloak>How to configure Wildfly to enable keycloak</a></li>
</ul>
<p><strong>Warning</strong></p>
<ul>
<li>The authentication only works in standalone mode, as the wildfly keycloak adapter doesn&rsquo;t support domain mode yet.</li>
</ul>
<h1 id=login-attempt>Login attempt</h1>
<div class=clearfix>
<a href=/img/documentation/keycloak-auth.png data-lightbox=L2ltZy9kb2N1bWVudGF0aW9uL2tleWNsb2FrLWF1dGgucG5n><img class="img-fluid float-lg-right ml-lg-3 mb-2 w-lg-50 border border-secondary" src=/img/documentation/keycloak-auth.png alt></a>
<div class=hal-imgflow-content>
<p>When user wants to access HAL management console, it redirects to Keycloak server and presents the authentication form.</p>
</div>
</div>
<h1 id=access-control>Access control</h1>
<div class=clearfix>
<a href=/img/documentation/access-control-sso.png data-lightbox="L2ltZy9kb2N1bWVudGF0aW9uL2FjY2Vzcy1jb250cm9sLXNzby5wbmc="><img class="img-fluid float-lg-left mr-lg-3 mb-2 w-lg-50 border border-secondary" src=/img/documentation/access-control-sso.png alt></a>
<div class=hal-imgflow-content>
<p><p>The Access Control top level menu, shows basic Keycloak settings:</p>
<ul>
<li>User information</li>
<li>Keycloak server url</li>
<li>Keycloak account profile</li>
<li>Realm name</li>
<li>Realm public key</li>
</ul>
<p>If RBAC is not set, there is a warning at the top warning the user, there is no role based access control mechanism, and there is an option to enable it.</p>
<p>Also, there is the &ldquo;Logout&rdquo; option in the header section.</p>
</p>
</div>
</div>
<h1 id=account-profile>Account Profile</h1>
<div class=clearfix>
<a href=/img/documentation/keycloak-acct-mgmt.png data-lightbox="L2ltZy9kb2N1bWVudGF0aW9uL2tleWNsb2FrLWFjY3QtbWdtdC5wbmc="><img class="img-fluid float-lg-right ml-lg-3 mb-2 w-lg-50 border border-secondary" src=/img/documentation/keycloak-acct-mgmt.png alt></a>
<div class=hal-imgflow-content>
<p><p>When user wants to view and edit basic user information on keycloak server, there is a link in the Access Control page, that redirects to Keycloak server.
The page enables users to:</p>
<ul>
<li>Edit name and email.</li>
<li>Change password.</li>
<li>List all login sessions.</li>
<li>Logout from all sessions.</li>
<li>List keycloak application the user is entitled to log in.</li>
</ul>
</p>
</div>
</div>
<h1 id=keycloak-adapter-subsystem>Keycloak Adapter Subsystem</h1>
<div class=clearfix>
<a href=/img/documentation/keycloak-subsystem.png data-lightbox="L2ltZy9kb2N1bWVudGF0aW9uL2tleWNsb2FrLXN1YnN5c3RlbS5wbmc="><img class="img-fluid float-lg-left mr-lg-3 mb-2 w-lg-50 border border-secondary" src=/img/documentation/keycloak-subsystem.png alt></a>
<div class=hal-imgflow-content>
<p>The Keycloak adapter subsystem may be managed using hal model browser. It provides full management capabilities to keycloak adapter subsystem.</p>
</div>
</div>
</article>
</main>
</div>
</div>
<footer class="hal-footer footer-dark bg-dark position-relative p-5">
<div class=container>
<div class=row><div class="col-md-2 offset-md-1">
<h6>Related</h6>
<ul class=list-unstyled><li><a class=small href=https://wildfly.org/>WildFly</a></li><li><a class=small href=http://www.gwtproject.org/>GWT</a></li><li><a class=small href=https://github.com/hal/elemento>Elemento</a></li></ul>
</div><div class=col-md-2>
<h6>Learn</h6>
<ul class=list-unstyled><li><a class=small href=/documentation/>Documentation</a></li><li><a class=small href=/development/>Development</a></li><li><a class=small href=/documentation/roadmap/>Roadmap</a></li></ul>
</div><div class=col-md-2>
<h6>Contribute</h6>
<ul class=list-unstyled><li><a class=small href=/documentation/contribute/>How To</a></li><li><a class=small href=https://issues.jboss.org/projects/HAL/issues>Submit a Bug</a></li><li><a class=small href=https://github.com/hal/console/fork>Fork the Code</a></li></ul>
</div><div class="col-md-3 offset-md-1">
<h6>Apache 2 License</h6>
<p class=small>All dependencies of this project are available under the Apache 2 or a compatible
license.</p>
</div>
</div>
<div class=row>
<div class="col-md-6 offset-md-1 hal-smaller font-weight-light">
<ul class="list-unstyled mb-0">
<li><span class="far fa-copyright"></span> Copyright 2018 Red Hat, Inc.</li>
<li><span class="fas fa-wrench"></span> Made with <a href=https://gohugo.io/>Hugo</a> static site
generator.
</li>
<li><span class="fas fa-code-branch"></span> This website is open source! If you want to improve it,
<a href=https://github.com/hal/site>fork the project</a> and send a pull request.
</li>
</ul>
</div>
</div>
</div>
</footer>
<div class="d-flex justify-content-center p-2 m-2">
<a href=https://www.redhat.com/><img src=/img/redhat.svg alt class=img-fluid style=width:100px></a>
</div>
<script src=https://code.jquery.com/jquery-3.3.1.min.js integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js integrity=sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q crossorigin=anonymous></script>
<script src=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js integrity=sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl crossorigin=anonymous></script>
<script src=/script/lightbox.min.js type=text/javascript></script>
<script src=/script/main.js type=text/javascript></script>
</body>
</html>